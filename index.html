<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Bowl Box Pool 2026</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        function SuperBowlBoxTracker() {
          const [activeTab, setActiveTab] = useState('quarters');
          const [gameScore, setGameScore] = useState({ team1: 0, team2: 0 });
          const [team1Name, setTeam1Name] = useState('Patriots');
          const [team2Name, setTeam2Name] = useState('Seahawks');
          const [isEditingNumbers, setIsEditingNumbers] = useState(false);
          const [isAdminUnlocked, setIsAdminUnlocked] = useState(false);
          const [isLiveMode, setIsLiveMode] = useState(false);
          const [lastUpdate, setLastUpdate] = useState(null);
          const [currentPeriod, setCurrentPeriod] = useState(0);
          const [gameClock, setGameClock] = useState('15:00');
          const [pendingQuarterWinner, setPendingQuarterWinner] = useState(null);
          const [winners, setWinners] = useState({
            quarters: { Q1: null, Q2: null, Q3: null, Q4: null },
            scoreChanges: [],
            final: null
          });

          const prefilledNames = [
            ['DaBoyz', 'Great Jammy Audrey', 'Lucky Laneys', 'MLou', 'MLou', 'Jane and Joe', 'Willis', 'Joe K', 'Frank J', 'Mary Jane G'],
            ['Sandy Haiko Digwood', 'Sharon T', 'DeeBra', '*Karen*', 'MaryAnn B', 'DaBoyz', 'Sharon T', 'Sharon T', 'Ann Marie S', 'MLou'],
            ['Jallison', 'Great Jammy Audrey', 'Kat', 'Brittany B', 'MaryAnn B', 'Debbie M', 'Gilly & Fletcher', 'Jane and Joe', 'Janice I', 'Jerry K'],
            ['Erin', 'Kuke', 'Erin', 'Becci', 'Harper', 'Colette Toflinski', 'Darrell Digwood', 'Trish I', 'Michael O', 'Pam Lyons'],
            ['Joe K', 'Kelly & Jah', 'Dannifer', 'Sharon T', 'Linda O\'Donnell', 'Jordie', 'Jenn O', 'Michelle & Kenny', 'Jane and Joe', 'Roseann S'],
            ['Zeke', 'Linda O\'Donnell', 'DaBoyz', 'Doodie', 'Mike Hegel', 'Ben G', 'Scooter', 'Ariel G', 'Ann N', 'Lucky Laneys'],
            ['Debbie M', 'Darrell Digwood', 'Lucky Laneys', 'Richard G', 'Lake House', 'Tom Lyons', 'Michelle & Kenny', 'Dave B', 'DaBoyz', 'Frank J'],
            ['Michelle & Kenny', 'C&C', 'Lisa S', 'DaBoyz', 'Michael O', 'Maureen G', 'Lucky Laneys', 'Saundersfest', 'Lori W', 'Sandy Haiko Digwood'],
            ['C&C', 'Lisa S', 'Colette Toflinski', 'Jillian D', 'Steve K', 'Carmen M', 'DaBoyz', 'Andrea G', 'Loni', 'Hegels'],
            ['Hegels', 'Linda K', 'Ann Marie S', 'Jenn L', 'Ariel G', '*Karen*', 'Jane and Joe', 'Michelle & Kenny', 'Ed B', 'Loie G']
          ];

          const [grids, setGrids] = useState({
            quarters: {
              team1Numbers: Array(10).fill(''),
              team2Numbers: Array(10).fill(''),
              boxes: Array(10).fill(null).map((_, row) => 
                Array(10).fill(null).map((_, col) => ({
                  number: row * 10 + col + 1,
                  name: prefilledNames[row][col]
                }))
              )
            },
            scoreChanges: {
              team1Numbers: Array(10).fill(''),
              team2Numbers: Array(10).fill(''),
              boxes: Array(10).fill(null).map((_, row) => 
                Array(10).fill(null).map((_, col) => ({
                  number: row * 10 + col + 1,
                  name: prefilledNames[row][col]
                }))
              )
            },
            final: {
              team1Numbers: Array(10).fill(''),
              team2Numbers: Array(10).fill(''),
              boxes: Array(10).fill(null).map((_, row) => 
                Array(10).fill(null).map((_, col) => ({
                  number: row * 10 + col + 1,
                  name: prefilledNames[row][col]
                }))
              )
            }
          });

          const [lastScore, setLastScore] = useState({ team1: 0, team2: 0 });

          useEffect(() => {
            const savedData = localStorage.getItem('superBowlBoxPool');
            if (savedData) {
              try {
                const parsed = JSON.parse(savedData);
                setGrids(parsed.grids || grids);
                setWinners(parsed.winners || winners);
                setGameScore(parsed.gameScore || gameScore);
                setTeam1Name(parsed.team1Name || team1Name);
                setTeam2Name(parsed.team2Name || team2Name);
                setLastScore(parsed.lastScore || lastScore);
              } catch (e) {
                console.error('Error loading saved data:', e);
              }
            }
            
            // Initialize 0-0 score change winner if numbers are set
            setTimeout(() => {
              setGrids(currentGrids => {
                const scGrid = currentGrids.scoreChanges;
                const hasNumbers = scGrid.team1Numbers.some(n => n !== '');
                
                if (hasNumbers && winners.scoreChanges.length === 0) {
                  const t1Index = scGrid.team2Numbers.findIndex(n => parseInt(n) === 0);
                  const t2Index = scGrid.team1Numbers.findIndex(n => parseInt(n) === 0);
                  
                  if (t1Index >= 0 && t2Index >= 0) {
                    const scWinner = scGrid.boxes[t2Index]?.[t1Index]?.name;
                    
                    if (scWinner) {
                      setWinners(prev => ({
                        ...prev,
                        scoreChanges: [{
                          changeNumber: 1,
                          score: `0 ${team1Name}, 0 ${team2Name}`,
                          winner: scWinner,
                          box: scGrid.boxes[t2Index][t1Index].number,
                          time: new Date().toLocaleTimeString(),
                          payout: '$25',
                          isPayoutEligible: true
                        }]
                      }));
                    }
                  }
                }
                return currentGrids;
              });
            }, 1000);
          }, []);

          useEffect(() => {
            const dataToSave = {
              grids,
              winners,
              gameScore,
              team1Name,
              team2Name,
              lastScore
            };
            localStorage.setItem('superBowlBoxPool', JSON.stringify(dataToSave));
          }, [grids, winners, gameScore, team1Name, team2Name, lastScore]);

          useEffect(() => {
            if (!isLiveMode) return;

            const fetchLiveScore = async () => {
              try {
                const response = await fetch('https://site.api.espn.com/apis/site/v2/sports/football/nfl/scoreboard');
                const data = await response.json();
                
                const superBowlGame = data.events?.find(event => {
                  const competitors = event.competitions?.[0]?.competitors || [];
                  const team1 = competitors.find(c => c.team.displayName.includes(team1Name));
                  const team2 = competitors.find(c => c.team.displayName.includes(team2Name));
                  return team1 && team2;
                });

                if (superBowlGame) {
                  const competition = superBowlGame.competitions[0];
                  const competitors = competition.competitors;
                  const team1Data = competitors.find(c => c.team.displayName.includes(team1Name));
                  const team2Data = competitors.find(c => c.team.displayName.includes(team2Name));
                  
                  if (team1Data && team2Data) {
                    const newScore = {
                      team1: parseInt(team1Data.score) || 0,
                      team2: parseInt(team2Data.score) || 0
                    };
                    
                    setGameScore(newScore);
                    setLastUpdate(new Date().toLocaleTimeString());

                    const status = competition.status;
                    const period = status.period || 0;
                    const displayClock = status.displayClock || '15:00';
                    
                    setGameClock(displayClock);

                    const statusType = status.type?.completed;

                    if (period > currentPeriod && period <= 4) {
                      const quarterMap = { 1: 'Q1', 2: 'Q2', 3: 'Q3', 4: 'Q4' };
                      setPendingQuarterWinner({
                        quarter: quarterMap[period - 1],
                        score: { ...newScore }
                      });
                      setCurrentPeriod(period);
                    }

                    if (statusType && period === 4 && !winners.final) {
                      setPendingQuarterWinner({
                        quarter: 'FINAL',
                        score: { ...newScore }
                      });
                    }
                  }
                }
              } catch (error) {
                console.error('Error fetching live scores:', error);
              }
            };

            fetchLiveScore();
            const interval = setInterval(fetchLiveScore, 30000);

            return () => clearInterval(interval);
          }, [isLiveMode, team1Name, team2Name]);

          useEffect(() => {
            if (gameScore.team1 !== lastScore.team1 || gameScore.team2 !== lastScore.team2) {
              const t1Last = gameScore.team1 % 10;
              const t2Last = gameScore.team2 % 10;
              
              const scGrid = grids.scoreChanges;
              const hasNumbers = scGrid.team1Numbers.some(n => n !== '');
              
              if (hasNumbers) {
                const t1Index = scGrid.team1Numbers.findIndex(n => parseInt(n) === t1Last);
                const t2Index = scGrid.team2Numbers.findIndex(n => parseInt(n) === t2Last);
                
                if (t1Index >= 0 && t2Index >= 0) {
                  const scWinner = scGrid.boxes[t2Index]?.[t1Index]?.name;

                  if (scWinner) {
                    const changeNumber = winners.scoreChanges.length + 1;
                    const isPayoutEligible = changeNumber <= 25;
                    const payout = changeNumber === 25 ? `${625 - (24 * 25)}` : '$25';
                    
                    setWinners(prev => ({
                      ...prev,
                      scoreChanges: [...prev.scoreChanges, {
                        changeNumber,
                        score: `${gameScore.team1} ${team1Name}, ${gameScore.team2} ${team2Name}`,
                        winner: scWinner,
                        box: scGrid.boxes[t2Index][t1Index].number,
                        time: new Date().toLocaleTimeString(),
                        payout,
                        isPayoutEligible
                      }]
                    }));
                  }
                }
              }

              setLastScore({ team1: gameScore.team1, team2: gameScore.team2 });
            }
          }, [gameScore, lastScore, grids, winners.scoreChanges.length, team1Name, team2Name]);

          const handleQuarterEnd = (quarter) => {
            const t1Last = gameScore.team1 % 10;
            const t2Last = gameScore.team2 % 10;
            
            const qGrid = grids.quarters;
            const hasNumbers = qGrid.team1Numbers.some(n => n !== '');
            
            if (hasNumbers) {
              const t1Index = qGrid.team1Numbers.findIndex(n => parseInt(n) === t1Last);
              const t2Index = qGrid.team2Numbers.findIndex(n => parseInt(n) === t2Last);
              
              if (t1Index >= 0 && t2Index >= 0) {
                const qWinner = qGrid.boxes[t2Index]?.[t1Index]?.name;
                const boxNum = qGrid.boxes[t2Index]?.[t1Index]?.number;

                const payouts = {
                  Q1: '$200',
                  Q2: '$400',
                  Q3: '$200',
                  Q4: '$525'
                };

                if (qWinner) {
                  setWinners(prev => ({
                    ...prev,
                    quarters: { 
                      ...prev.quarters, 
                      [quarter]: { 
                        winner: qWinner, 
                        box: boxNum,
                        payout: payouts[quarter]
                      } 
                    }
                  }));
                }
              }
            }
          };

          const handleFinalScore = () => {
            const t1Last = gameScore.team1 % 10;
            const t2Last = gameScore.team2 % 10;
            
            const fGrid = grids.final;
            const hasNumbers = fGrid.team1Numbers.some(n => n !== '');
            
            if (hasNumbers) {
              const t1Index = fGrid.team1Numbers.findIndex(n => parseInt(n) === t1Last);
              const t2Index = fGrid.team2Numbers.findIndex(n => parseInt(n) === t2Last);
              
              if (t1Index >= 0 && t2Index >= 0) {
                const fWinner = fGrid.boxes[t2Index]?.[t1Index]?.name;
                const boxNum = fGrid.boxes[t2Index]?.[t1Index]?.number;

                if (fWinner) {
                  setWinners(prev => ({ 
                    ...prev, 
                    final: { 
                      winner: fWinner, 
                      box: boxNum,
                      payout: '$550'
                    } 
                  }));
                }
              }
            }
          };

          const confirmQuarterWinner = () => {
            if (pendingQuarterWinner) {
              if (pendingQuarterWinner.quarter === 'FINAL') {
                handleFinalScore();
              } else {
                handleQuarterEnd(pendingQuarterWinner.quarter);
              }
              setPendingQuarterWinner(null);
            }
          };

          const dismissQuarterWinner = () => {
            setPendingQuarterWinner(null);
          };

          const updateBoxName = (bracket, row, col, name) => {
            setGrids(prev => ({
              ...prev,
              [bracket]: {
                ...prev[bracket],
                boxes: prev[bracket].boxes.map((r, i) => 
                  i === row ? r.map((box, j) => j === col ? { ...box, name } : box) : r
                )
              }
            }));
          };

          const updateNumber = (bracket, axis, index, value) => {
            if (value === '' || /^\d$/.test(value)) {
              setGrids(prev => ({
                ...prev,
                [bracket]: {
                  ...prev[bracket],
                  [`${axis}Numbers`]: prev[bracket][`${axis}Numbers`].map((n, i) => 
                    i === index ? value : n
                  )
                }
              }));
            }
          };

          const toggleAdmin = () => {
            if (!isAdminUnlocked) {
              const password = prompt('Enter admin password:');
              if (password === 'Zeke2019') {
                setIsAdminUnlocked(true);
              } else {
                alert('Incorrect password');
              }
            } else {
              setIsAdminUnlocked(false);
              setIsEditingNumbers(false);
            }
          };

          const generateFBPost = () => {
            let post = `üèà SUPER BOWL BOX POOL UPDATE üèà\n\n`;
            post += `Score: ${team1Name} ${gameScore.team1} - ${team2Name} ${gameScore.team2}\n\n`;
            
            post += `üèÜ QUARTERS:\n`;
            Object.entries(winners.quarters).forEach(([q, data]) => {
              if (data) {
                post += `${q}: ${data.winner} (Box ${data.box}) - ${data.payout}\n`;
              }
            });
            
            post += `\nüí∞ SCORE CHANGES (${winners.scoreChanges.length} total):\n`;
            winners.scoreChanges.slice(-5).forEach(sc => {
              post += `${sc.changeNumber}. [${sc.score}] - ${sc.winner} - ${sc.payout}\n`;
            });
            if (winners.scoreChanges.length > 5) {
              post += `... and ${winners.scoreChanges.length - 5} more\n`;
            }
            
            if (winners.final) {
              post += `\nüéâ FINAL: ${winners.final.winner} (Box ${winners.final.box}) - $550\n`;
            }
            
            return post;
          };

          const copyToClipboard = () => {
            navigator.clipboard.writeText(generateFBPost());
            alert('Copied! Ready to paste in Facebook.');
          };

          const GridDisplay = ({ bracket, gridData }) => {
            const t1Last = gameScore.team1 % 10;
            const t2Last = gameScore.team2 % 10;
            const hasNumbers = gridData.team1Numbers.some(n => n !== '');
            
            // Patriots (team1) score matches TOP row numbers (team2Numbers)
            // Seahawks (team2) score matches LEFT column numbers (team1Numbers)
            const patriotsColIndex = hasNumbers ? gridData.team2Numbers.findIndex(n => parseInt(n) === t1Last) : -1;
            const seahawksRowIndex = hasNumbers ? gridData.team1Numbers.findIndex(n => parseInt(n) === t2Last) : -1;

            return (
              <div className="overflow-x-auto -mx-6 px-6">
                <div className="inline-block min-w-full">
                <table className="border-collapse mx-auto">
                  <tbody>
                    <tr>
                      <td className="w-24 h-14 bg-white border-2 border-black text-center font-bold text-sm leading-tight p-1">
                        $25/box
                      </td>
                      <td className="w-16"></td>
                      <td colSpan="10" className="bg-gradient-to-r from-red-600 to-blue-800 text-white text-center py-2 font-bold text-xl border-2 border-black">
                        {team1Name}
                      </td>
                    </tr>
                    
                    <tr>
                      <td rowSpan="11" className="w-24 bg-gradient-to-b from-green-700 to-blue-900 text-white border-2 border-black relative">
                        <div className="absolute inset-0 flex items-center justify-center">
                          <div className="transform -rotate-90 whitespace-nowrap font-bold text-xl">
                            {team2Name}
                          </div>
                        </div>
                      </td>
                      <td className="w-16 h-10 bg-gray-200 border-2 border-black text-center text-[8px] font-bold leading-tight p-0.5">
                        TBD after<br/>pool filled
                      </td>
                      {gridData.team2Numbers.map((num, i) => (
                        <td key={i} className={`w-16 h-10 border border-gray-400 text-center font-bold text-xl ${
                          i === patriotsColIndex ? 'bg-yellow-300' : 'bg-white'
                        }`}>
                          {isEditingNumbers ? (
                            <input
                              type="text"
                              maxLength="1"
                              value={num}
                              onChange={(e) => updateNumber(bracket, 'team2', i, e.target.value)}
                              className="w-full h-full text-center bg-transparent border-none outline-none text-xl font-bold"
                            />
                          ) : (
                            num || '?'
                          )}
                        </td>
                      ))}
                    </tr>

                    {gridData.boxes.map((row, rowIndex) => (
                      <tr key={rowIndex}>
                        <td className={`w-16 h-16 border border-gray-400 text-center font-bold text-xl ${
                          rowIndex === seahawksRowIndex ? 'bg-yellow-300' : 'bg-white'
                        }`}>
                          {isEditingNumbers ? (
                            <input
                              type="text"
                              maxLength="1"
                              value={gridData.team1Numbers[rowIndex]}
                              onChange={(e) => updateNumber(bracket, 'team1', rowIndex, e.target.value)}
                              className="w-full h-full text-center bg-transparent border-none outline-none text-xl font-bold"
                            />
                          ) : (
                            gridData.team1Numbers[rowIndex] || '?'
                          )}
                        </td>
                        {row.map((box, colIndex) => {
                          const isWinningBox = seahawksRowIndex === rowIndex && patriotsColIndex === colIndex && hasNumbers;
                          const quarterWinner = Object.entries(winners.quarters).find(([q, data]) => data?.box === box.number);
                          
                          return (
                          <td key={colIndex} className={`w-20 h-20 sm:w-24 sm:h-24 border border-gray-300 p-1 ${
                            isWinningBox
                              ? 'bg-green-300 ring-2 ring-green-600' 
                              : 'bg-pink-100'
                          }`}>
                            <div className="flex flex-col items-center justify-center h-full">
                              <div className="text-[7px] sm:text-[8px] text-gray-400 font-semibold mb-0.5">{box.number}</div>
                              <textarea
                                value={box.name}
                                onChange={(e) => updateBoxName(bracket, rowIndex, colIndex, e.target.value)}
                                className="w-full h-12 text-[10px] sm:text-[11px] text-center bg-transparent border-none outline-none font-bold leading-tight text-gray-800 resize-none overflow-hidden"
                                style={{ wordBreak: 'break-word' }}
                                disabled={!isAdminUnlocked}
                              />
                              {bracket === 'quarters' && quarterWinner && (
                                <div className="text-[8px] font-bold text-green-700 mt-0.5">
                                  {quarterWinner[0]} ‚úì
                                </div>
                              )}
                            </div>
                          </td>
                        )})}

                      </tr>
                    ))}
                  </tbody>
                </table>
                </div>
              </div>
            );
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-4">
              <div className="max-w-7xl mx-auto">
                {pendingQuarterWinner && isAdminUnlocked && (
                  <div className="fixed top-20 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-black p-6 rounded-xl shadow-2xl z-50 animate-bounce border-4 border-yellow-600">
                    <div className="text-center">
                      <div className="text-2xl font-bold mb-2">
                        üéâ {pendingQuarterWinner.quarter} Ended!
                      </div>
                      <div className="text-lg mb-4">
                        Score: {pendingQuarterWinner.score.team1} - {pendingQuarterWinner.score.team2}
                      </div>
                      <div className="flex gap-3 justify-center">
                        <button
                          onClick={confirmQuarterWinner}
                          className="px-6 py-3 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700"
                        >
                          ‚úì Confirm Winner
                        </button>
                        <button
                          onClick={dismissQuarterWinner}
                          className="px-6 py-3 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700"
                        >
                          ‚úó Dismiss
                        </button>
                      </div>
                      <div className="text-xs mt-2 opacity-75">Admin Only</div>
                    </div>
                  </div>
                )}

                <div className="text-center mb-6">
                  <h1 className="text-5xl font-bold text-white mb-2">Super Bowl Box Pool</h1>
                  <p className="text-gray-300">$25/box (1-100) ‚Ä¢ First Come First Serve</p>
                </div>

                <div className="bg-white rounded-lg shadow-xl p-6 mb-6">
                  <div className="grid grid-cols-3 gap-4 items-center">
                    <div className="text-center">
                      <div className="text-xl font-bold mb-2 bg-gradient-to-r from-red-600 to-blue-800 text-white px-4 py-1 rounded-lg inline-block">{team1Name}</div>
                      {isAdminUnlocked ? (
                        <input
                          type="text"
                          inputMode="numeric"
                          pattern="[0-9]*"
                          value={gameScore.team1}
                          onChange={(e) => {
                            const value = e.target.value.replace(/\D/g, '');
                            setGameScore(prev => ({ ...prev, team1: parseInt(value) || 0 }));
                          }}
                          className="text-center text-6xl font-bold border-4 border-blue-800 rounded-lg px-4 py-3 w-full"
                          disabled={isLiveMode}
                        />
                      ) : (
                        <div className="text-center text-6xl font-bold border-4 border-blue-800 rounded-lg px-4 py-3 w-full bg-gray-50">
                          {gameScore.team1}
                        </div>
                      )}
                    </div>
                    
                    <div className="text-center">
                      <div className="text-gray-500 text-sm mb-2">
                        {isLiveMode ? (
                          <span className="text-green-600 font-bold flex items-center justify-center gap-2">
                            <span className="animate-pulse">‚óè</span> LIVE
                            {lastUpdate && <span className="text-xs text-gray-400">({lastUpdate})</span>}
                          </span>
                        ) : (
                          <span className="text-gray-600 font-semibold">GAME STATUS</span>
                        )}
                      </div>
                      
                      {!isAdminUnlocked && (
                        <div className="space-y-1">
                          <div className="text-2xl font-bold text-gray-700">
                            {currentPeriod === 0 && 'Pregame'}
                            {currentPeriod === 1 && 'Q1'}
                            {currentPeriod === 2 && 'Q2'}
                            {currentPeriod === 3 && 'Q3'}
                            {currentPeriod === 4 && 'Q4'}
                            {currentPeriod > 4 && 'Final'}
                          </div>
                          {currentPeriod > 0 && currentPeriod <= 4 && (
                            <div className="text-xl font-mono text-gray-600">
                              {gameClock}
                            </div>
                          )}
                        </div>
                      )}

                      {isAdminUnlocked && (
                        <>
                          <div className="flex gap-2 justify-center mb-2 flex-wrap">
                            <button onClick={() => handleQuarterEnd('Q1')} className="px-4 py-2 bg-blue-500 text-white rounded-lg font-bold hover:bg-blue-600">
                              Q1
                            </button>
                            <button onClick={() => handleQuarterEnd('Q2')} className="px-4 py-2 bg-blue-500 text-white rounded-lg font-bold hover:bg-blue-600">
                              Q2
                            </button>
                            <button onClick={() => handleQuarterEnd('Q3')} className="px-4 py-2 bg-blue-500 text-white rounded-lg font-bold hover:bg-blue-600">
                              Q3
                            </button>
                            <button onClick={() => handleQuarterEnd('Q4')} className="px-4 py-2 bg-blue-500 text-white rounded-lg font-bold hover:bg-blue-600">
                              Q4
                            </button>
                            <button onClick={handleFinalScore} className="px-4 py-2 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600">
                              Final
                            </button>
                          </div>
                          <button
                            onClick={() => setIsLiveMode(!isLiveMode)}
                            className={`px-4 py-2 rounded-lg font-semibold text-sm ${
                              isLiveMode ? 'bg-green-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                            }`}
                          >
                            {isLiveMode ? '‚óè ESPN Live Mode ON' : 'Enable ESPN Live Scores'}
                          </button>
                        </>
                      )}
                    </div>
                    
                    <div className="text-center">
                      <div className="text-xl font-bold mb-2 bg-gradient-to-r from-green-700 to-blue-900 text-white px-4 py-1 rounded-lg inline-block">{team2Name}</div>
                      {isAdminUnlocked ? (
                        <input
                          type="text"
                          inputMode="numeric"
                          pattern="[0-9]*"
                          value={gameScore.team2}
                          onChange={(e) => {
                            const value = e.target.value.replace(/\D/g, '');
                            setGameScore(prev => ({ ...prev, team2: parseInt(value) || 0 }));
                          }}
                          className="text-center text-6xl font-bold border-4 border-green-700 rounded-lg px-4 py-3 w-full"
                          disabled={isLiveMode}
                        />
                      ) : (
                        <div className="text-center text-6xl font-bold border-4 border-green-700 rounded-lg px-4 py-3 w-full bg-gray-50">
                          {gameScore.team2}
                        </div>
                      )}
                    </div>
                  </div>
                </div>

                <div className="flex gap-3 mb-6 overflow-x-auto bg-white/10 rounded-lg p-3 backdrop-blur">
                  {[
                    { id: 'quarters', label: 'üèÜ Quarters', sub: '$200 / $400 / $525', color: 'from-blue-500 to-blue-600' },
                    { id: 'scoreChanges', label: 'üí∞ Score Changes', sub: '$25 each', color: 'from-green-500 to-green-600' },
                    { id: 'final', label: 'üéâ Final Score', sub: '$550', color: 'from-yellow-500 to-yellow-600' },
                    { id: 'winners', label: 'üìã Winners History', sub: 'View all', color: 'from-purple-500 to-purple-600' }
                  ].map(tab => (
                    <button
                      key={tab.id}
                      onClick={() => setActiveTab(tab.id)}
                      className={`flex-1 px-4 py-3 rounded-lg font-bold transition-all text-center ${
                        activeTab === tab.id
                          ? `bg-gradient-to-r ${tab.color} text-white shadow-lg transform scale-105`
                          : 'bg-white/20 text-white hover:bg-white/30'
                      }`}
                    >
                      <div className="text-sm">{tab.label}</div>
                      <div className="text-xs opacity-80">{tab.sub}</div>
                    </button>
                  ))}
                </div>

                <div className="bg-white rounded-lg shadow-xl p-6 mb-6">
                  {activeTab !== 'winners' && (
                    <div className="mb-4 text-center">
                      <span className="text-sm font-semibold text-gray-600">
                        Each bracket has independent number assignments
                      </span>
                    </div>
                  )}
                  
                  {activeTab === 'quarters' && <GridDisplay bracket="quarters" gridData={grids.quarters} />}
                  {activeTab === 'scoreChanges' && <GridDisplay bracket="scoreChanges" gridData={grids.scoreChanges} />}
                  {activeTab === 'final' && <GridDisplay bracket="final" gridData={grids.final} />}
                  
                  {activeTab === 'winners' && (
                    <div className="space-y-6">
                      <div className="flex justify-between items-center">
                        <h2 className="text-2xl font-bold">Winners Summary</h2>
                        {isAdminUnlocked && (
                          <button
                            onClick={copyToClipboard}
                            className="px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 flex items-center gap-2"
                          >
                            üìã Copy for Facebook
                          </button>
                        )}
                      </div>

                      <div className="grid md:grid-cols-3 gap-6">
                        <div className="bg-blue-50 p-4 rounded-lg">
                          <h3 className="font-bold mb-3 text-lg">üèÜ Quarters</h3>
                          {Object.entries(winners.quarters).map(([q, data]) => (
                            <div key={q} className="mb-2 text-sm">
                              <strong>{q}:</strong> {data?.winner || 'TBD'}
                              {data?.payout && <span className="text-green-600 ml-2">{data.payout}</span>}
                            </div>
                          ))}
                        </div>

                        <div className="bg-green-50 p-4 rounded-lg">
                          <h3 className="font-bold mb-3 text-lg">üí∞ Score Changes</h3>
                          <div className="text-sm mb-2">
                            Total: {winners.scoreChanges.length}
                            {winners.scoreChanges.length >= 25 && (
                              <span className="block text-xs text-red-600 mt-1">
                                Maximum 25 payouts reached
                              </span>
                            )}
                          </div>
                          <div className="max-h-96 overflow-y-auto text-xs">
                            {winners.scoreChanges.length === 0 ? (
                              <p className="text-gray-500 italic">First change will be recorded at 0-0</p>
                            ) : (
                              winners.scoreChanges.map((sc, i) => (
                                <div key={i} className={`mb-2 pb-2 border-b border-green-200 ${!sc.isPayoutEligible ? 'opacity-50' : ''}`}>
                                  <div className="font-semibold">
                                    {sc.changeNumber}. [{sc.score}] - {sc.winner}
                                  </div>
                                  <div className={`text-xs mt-1 ${sc.isPayoutEligible ? 'text-green-600' : 'text-red-600'} font-bold`}>
                                    {sc.payout}
                                  </div>
                                  <div className="text-xs text-gray-500">{sc.time}</div>
                                </div>
                              ))
                            )}
                          </div>
                        </div>

                        <div className="bg-yellow-50 p-4 rounded-lg">
                          <h3 className="font-bold mb-3 text-lg">üéâ Final Score</h3>
                          <div className="text-center py-6">
                            <div className="text-xl font-bold">{winners.final?.winner || 'TBD'}</div>
                            {winners.final?.payout && (
                              <div className="text-lg text-green-600 font-bold mt-2">{winners.final.payout}</div>
                            )}
                          </div>
                        </div>
                      </div>

                      {isAdminUnlocked && (
                        <div className="bg-gray-50 p-4 rounded-lg">
                          <h3 className="font-bold mb-3">Facebook Post Preview:</h3>
                          <pre className="whitespace-pre-wrap text-sm bg-white p-4 rounded border font-mono">
                            {generateFBPost()}
                          </pre>
                        </div>
                      )}
                    </div>
                  )}
                </div>

                {isAdminUnlocked && (
                  <div className="fixed bottom-0 left-0 right-0 bg-gradient-to-r from-orange-600 to-red-600 text-white p-4 shadow-2xl z-50">
                    <div className="max-w-7xl mx-auto flex justify-between items-center flex-wrap gap-4">
                      <div className="flex items-center gap-4 flex-wrap">
                        <span className="font-bold">üîì Admin Mode Active</span>
                        <button
                          onClick={() => setIsEditingNumbers(!isEditingNumbers)}
                          className={`px-6 py-2 rounded-lg font-semibold ${
                            isEditingNumbers ? 'bg-white text-orange-600' : 'bg-orange-700 hover:bg-orange-800'
                          }`}
                        >
                          {isEditingNumbers ? 'Save Numbers' : 'Edit Numbers'}
                        </button>
                        <span className="text-sm opacity-90">Edit box names and numbers for each bracket</span>
                      </div>
                      <button
                        onClick={toggleAdmin}
                        className="px-6 py-2 bg-white text-red-600 rounded-lg font-semibold hover:bg-gray-100"
                      >
                        Lock Admin
                      </button>
                    </div>
                  </div>
                )}

                {!isAdminUnlocked && (
                  <div className="fixed bottom-4 right-4 z-50">
                    <button
                      onClick={toggleAdmin}
                      className="p-4 bg-gray-700 text-white rounded-full shadow-xl hover:bg-gray-600 text-2xl"
                      title="Admin Access"
                    >
                      üîí
                    </button>
                  </div>
                )}
              </div>
            </div>
          );
        }

        ReactDOM.render(<SuperBowlBoxTracker />, document.getElementById('root'));
    </script>
</body>
</html>